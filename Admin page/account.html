<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Account</title>
    <link href="https://cdn.lineicons.com/5.0/lineicons.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div class="wrapper">
        <aside id="sidebar">
            <div class="d-flex">
                <button class="toggle-btn" type="button">
                    <i class="lni lni-dashboard-square-1"></i>
                </button>
                <div class="sidebar-logo">
                    <a href="index.html">Admin Panel</a>
                </div>
            </div>
            <ul class="sidebar-nav">
                <li class="sidebar-item">
                    <a href="schedule.html" class="sidebar-link">
                        <i class="lni lni-calendar-days"></i>
                        <span>Schedule</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="chat.html" class="sidebar-link">
                        <i class="lni lni-comment-1"></i>
                        <span>Chats</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="feed.html" class="sidebar-link">
                        <i class="lni lni-phone"></i>
                        <span>Feeds</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="clients.html" class="sidebar-link">
                        <i class="lni lni-user-multiple-4"></i>
                        <span>Clients</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="inventory.html" class="sidebar-link">
                        <i class="lni lni-bar-chart-4"></i>
                        <span>Inventory</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="account.html" class="sidebar-link">
                        <i class="lni lni-locked-1"></i>
                        <span>Accounts</span>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="javascript:void(0)" class="sidebar-link" id="logoutLink">
                        <i class="lni lni-exit"></i>
                        <span>Logout</span>
                    </a>
                </li>
                
                
            </ul>
           
        </aside>
        <div class="main p-4">
            <div class="text-center">
                <h1>Accounts</h1>
            </div> 
            <!-- Navigation Bar for Switching Sections -->
            <ul class="nav nav-tabs" id="accountTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <a class="nav-link active" id="accounts-tab" data-bs-toggle="tab" href="#account-list" role="tab" aria-controls="account-list" aria-selected="true">Account List</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a class="nav-link " id="create-tab" data-bs-toggle="tab" href="#create-account" role="tab" aria-controls="create-account" aria-selected="false">Create Account</a>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content mt-3">


                <!-- Account Table -->
                <div class="tab-pane fade show active" id="account-list" role="tabpanel" aria-labelledby="accounts-tab">
                    <div class="table-responsive">
                        <div class="text-left">
                            <h1>List of Accounts</h1>
                        </div>
                     <!-- Search bar -->
                        <div class="mb-3 d-flex justify-content-between align-items-center">
                            <div class="input-group w-auto ms-auto">
                                <span class="input-group-text text-primary-emphasis text-white">
                                <i class="lni lni-search-1"></i>
                            </span>
                            <input type="text" id="accountSearchBar" class="form-control" placeholder="Search by name or email..." onkeyup="filterAccounts()">
                        </div>
                    </div>
                    <div class="table-scroll">
                        <table class="table table-striped table-hover text-center">
                            <thead class="table-dark">
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Birthday</th>
                                    <th>Email</th>
                                    <th>Password</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="accountTable">
                                <!-- Dynamically added rows will go here -->
                            </tbody>
                        </table>
                        </div>
                    </div>
                </div>
                                    <!-- Create Account Form -->
                                    <div class="tab-pane fade " id="create-account" role="tabpanel" aria-labelledby="create-tab">
                                        <div class="text-center">
                                             
                                        </div>
                                        <form id="accountForm" class="row g-3 mb-4 mx-auto">
                                            <div class="col-md-12 d-flex flex-column align-items-start">
                                                <label for="name" class="form-label">Name</label>
                                                <input type="name" class="form-control" id="name" name="name" placeholder="Enter your name" required>
                                            </div>
                                            <div class="col-md-12 d-flex flex-column align-items-start">
                                                <label for="birthday" class="form-label">Birthday</label>
                                                <input type="date" class="form-control" id="birthday" name="birthday" placeholder="Enter your birthday" required>
                                            </div>     
                                            <div class="col-md-12 d-flex flex-column align-items-start">
                                                <label for="email" class="form-label">Email</label>
                                                <input type="email" class="form-control" id="email" name="email" placeholder="Enter email" required>
                                            </div>
                                            <div class="col-md-12 d-flex flex-column align-items-start">
                                                <label for="password" class="form-label">Password</label>
                                                <input type="password" class="form-control" id="password" name="password" placeholder="Enter password" required>
                                            </div>
                                            <div class="col-md-12 d-flex align-items-end">
                                                <button type="submit" class="btn btn-success">Create Account</button>
                                            </div>
                                            
                                        </form>
                                    </div>
            </div>
        </div>
    </div>
        
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- JavaScript to handle form and CRUD operations -->
    <script>
        const accountForm = document.getElementById('accountForm');
        const accountTable = document.getElementById('accountTable');
        let accounts = [];
        let idCounter = 1;

        // Handle form submission
        accountForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = document.getElementById('name').value;
            const birthday = document.getElementById('birthday').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            // Add new account to the array
            accounts.push({ id: idCounter++, name, birthday, email, password });

            // Save updated accounts to localStorage
            saveAccounts();

            // Render the updated table
            renderTable();

            // Reset the form
            accountForm.reset();

            // Show success alert
            alert('You have added a new account!');

            // Switch to the 'Account List' tab
            switchToAccountListTab();
        });

        // Function to save accounts to localStorage
        function saveAccounts() {
            localStorage.setItem('accounts', JSON.stringify(accounts));
            localStorage.setItem('idCounter', idCounter); // Save the current ID counter
        }

        // Function to load accounts from localStorage
            function loadAccounts() {
                const savedAccounts = localStorage.getItem('accounts');

                // If accounts are saved, parse and set them
                if (savedAccounts) {
                    accounts = JSON.parse(savedAccounts);
                }

                // Render the table
                renderTable();
            }

            // Call loadAccounts when the page loads
            window.onload = loadAccounts;

            // Function to render the table
            function renderTable() {
                accountTable.innerHTML = accounts.map(account => `
                    <tr>
                        <td>${account.id}</td>
                        <td>${account.name}</td>
                        <td>${account.birthday}</td>
                        <td>${account.email}</td>
                        <td>${account.password}</td>
                        <td>
                            <a href="edit-account.html?id=${account.id}" class="btn btn-primary btn-sm">Edit</a>
                            <button class="btn btn-danger btn-sm" onclick="deleteAccount(${account.id})">Delete</button>
                        </td>
                    </tr>
                `).join('');
            }


        // Function to filter accounts
        function filterAccounts() {
            const searchValue = document.getElementById("accountSearchBar").value.toLowerCase();
            const rows = document.querySelectorAll("#accountTable tr");

            rows.forEach(row => {
                const name = row.cells[1]?.textContent.toLowerCase() || ""; // Account Name
                const email = row.cells[2]?.textContent.toLowerCase() || ""; // Account Email

                if (name.includes(searchValue) || email.includes(searchValue)) {
                    row.style.display = ""; // Show row
                } else {
                    row.style.display = "none"; // Hide row
                }
            });
        }

        // Function to switch to the 'Account List' tab
        function switchToAccountListTab() {
            var accountListTab = new bootstrap.Tab(document.getElementById('accounts-tab'));
            accountListTab.show();
        }

       
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
    <script src="js/script.js"></script>
</body>

</html>